# Boss Machine API

---

## üöÄ Project Overview

This project is a **complete RESTful API** designed to power a unique management application: the "Boss Machine." It allows accomplished (and perhaps a little evil!) entrepreneurs to manage their **Minions**, track their brilliant **Million-Dollar Ideas**, and handle all the incessant **Meetings** that fill their busy schedules. This project is part of Codecademy's **"Create a Back-End App with JavaScript Skill Path."** 

The API is built using **Node.js and Express.js**, focusing on creating robust and efficient CRUD (Create, Read, Update, Delete) endpoints for three main entities.

You can see a video demonstration of the final application (with a functional API) here: 

<video width="100%" height="100%" controls>
   <source src="https://s3.amazonaws.com/codecademy-content/programs/build-apis/solution-videos/BossMachine480.mov" type="video/mp4">
</video>

If you are not seeing the video player, [you can download it here.](./.github/BossMachine480.mov)

---

## üõ†Ô∏è How to Get Started

To get the Boss Machine API up and running on your local machine, follow these steps:

1.  **Clone the Repository:**
    * Open your terminal.
    * Clone the project from GitHub: `git clone https://github.com/Robson16/boss-machine.git`
    * Navigate into the project directory: `cd boss-machine`

2.  **Install Dependencies:**
    * In the project's root directory, run `npm install` to install all necessary project dependencies (including testing libraries and front-end build tools).

3.  **Start the Server:**
    * After installation, execute `npm run start`.
    * You'll see `Server listening on port 4001` in your terminal, indicating the server is active.
    * The `npm run start` script includes hot-reloading, meaning your server will automatically restart whenever you make changes to **server.js** or the **server/** folder. To disable this, start your server with `node server.js`.
    * To stop the server, use `Ctrl + C`.

4.  **Access the Application:**
    * To view the front-end application (which consumes this API), simply open **index.html** in your preferred web browser. Google Chrome (v60+) or Firefox (v55+) are recommended.

---

## ‚ú® Implementation Details (API)

This project focuses on building the API backend. You'll primarily work within the **server/** folder. The `browser`, `public`, and `node_modules` folders contain front-end code and dependencies, and typically don't require modification for this API project.

### Server Boilerplate Configuration (`server.js`)

The **server.js** file provides the initial server boilerplate. The following key functionalities have been implemented to ensure the API runs correctly:

* **`body-parser` Middleware:** Configured to parse request bodies.
* **`cors` Middleware:** Enabled with default settings to allow cross-origin requests.
* **`apiRouter` Mounting:** The main API router (`apiRouter`) is mounted at the `/api` path, serving as the entry point for all API endpoints.
* **Server Port:** The server is set to listen on the `PORT` constant, ensuring compatibility with the testing environment.

### API Route Structure and Endpoints

All API routes are located within the **server/** folder. The file and router structure within this folder is organized for maintainability and clarity.

The "mock database" resides in **server/db.js**. It's reseeded every time the server restarts, ensuring a clean state for testing.

#### Implemented Endpoints:

* **`/api/minions`**
    * `GET /api/minions`: Returns an array of all minions.
    * `POST /api/minions`: Creates a new minion from the request body data and saves it to the database.
    * `GET /api/minions/:minionId`: Returns a single minion by its ID.
    * `PUT /api/minions/:minionId`: Updates an existing minion by its ID with provided request body data.
    * `DELETE /api/minions/:minionId`: Deletes a minion from the database by its ID.

* **`/api/ideas`**
    * `GET /api/ideas`: Returns an array of all ideas.
    * `POST /api/ideas`: Creates a new idea from the request body data and saves it to the database.
    * `GET /api/ideas/:ideaId`: Returns a single idea by its ID.
    * `PUT /api/ideas/:ideaId`: Updates an existing idea by its ID with provided request body data.
    * `DELETE /api/ideas/:ideaId`: Deletes an idea from the database by its ID.

* **`/api/meetings`**
    * `GET /api/meetings`: Returns an array of all meetings.
    * `POST /api/meetings`: Creates a new meeting (automatically generated by the server) and saves it to the database. No request body is required.
    * `DELETE /api/meetings`: Deletes **all** meetings from the database.

**Request Handling Notes:**
* For `POST` and `PUT` requests to `/api/minions` and `/api/ideas`, new/updated resources are sent in the request body. IDs for new resources (`POST`) are automatically generated by the API.
* The API handles **data type conversion and validation** (e.g., from `string` to `number` where necessary), ensuring robustness for client-provided data.

### Custom Middleware: `checkMillionDollarIdea`

The `checkMillionDollarIdea` function (located in **server/checkMillionDollarIdea.js**) is a custom middleware. It ensures that any new or updated ideas are worth at least one million dollars. The total value is calculated as the product of the `numWeeks` and `weeklyRevenue` properties. This middleware is applied to the `POST` and `PUT` routes for ideas.

### Working with the 'Database' (`server/db.js`)

The **server/db.js** file exports helper functions that simulate database operations. These functions abstract the array manipulation logic, allowing the focus to remain on building Express routes. All functions accept the model name (e.g., `'minions'`, `'ideas'`, `'meetings'`) as their first argument.

* `getAllFromDatabase(modelName)`: Returns an array of elements.
* `getFromDatabaseById(modelName, id)`: Returns a single instance by ID or `null` if not found/invalid.
* `addToDatabase(modelName, instance)`: Adds a new instance, assigns an ID, and returns it.
* `updateInstanceInDatabase(modelName, instance)`: Updates an existing instance based on its `id`, returning the updated instance or `null`.
* `deleteFromDatabaseById(modelName, id)`: Deletes an instance by ID, returning `true` or `false`.
* `deleteAllFromDatabase(modelName)`: Deletes all instances of a model, returning a new, empty array.

---

## üß™ Testing

A comprehensive testing suite is provided to check for all essential functionality and edge cases.

To run the tests:

1.  **Installation:** Ensure you have run `npm install` in the project root directory.
2.  **Execution:** Run `npm run test` in your terminal from the project root.

The tests will automatically rerun every time you save files in the `server/` directory. To exit the testing loop, use `Ctrl + C`. To run tests only once, use the `mocha` command directly.

It's highly recommended to run tests incrementally as you implement features to validate your code and identify potential bugs early.

---

## License

This project is licensed under the MIT License.
Developed by Robson16.